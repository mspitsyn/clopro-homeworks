# Домашнее задание к занятию «Безопасность в облачных провайдерах»  

Используя конфигурации, выполненные в рамках предыдущих домашних заданий, нужно добавить возможность шифрования бакета.

---
## Задание 1. Yandex Cloud   

1. С помощью ключа в KMS необходимо зашифровать содержимое бакета:

 - создать ключ в KMS;
 - с помощью ключа зашифровать содержимое бакета, созданного ранее.
2. (Выполняется не в Terraform)* Создать статический сайт в Object Storage c собственным публичным адресом и сделать доступным по HTTPS:

 - создать сертификат;
 - создать статическую страницу в Object Storage и применить сертификат HTTPS;
 - в качестве результата предоставить скриншот на страницу с сертификатом в заголовке (замочек).

Полезные документы:

- [Настройка HTTPS статичного сайта](https://cloud.yandex.ru/docs/storage/operations/hosting/certificate).
- [Object Storage bucket](https://registry.terraform.io/providers/yandex-cloud/yandex/latest/docs/resources/storage_bucket).
- [KMS key](https://registry.terraform.io/providers/yandex-cloud/yandex/latest/docs/resources/kms_symmetric_key).

--- 
## Решение задания 1.  
1. В [bucket.tf](./terraform/bucket.tf) создаем kms ключ и шифруем им s3-bucket.
- Проверяем, что ключ создался:  
  ![task1.1](./img/task1.1.png)  
  ![task1.1.1](./img/task1.1.1.png)  
- Файл зашифрован:  
  ![task1.1.2](./img/task1.1.2.png)  
- При попытке открыть файл по ссылке, получаем ошибку:  
  ![task1.1.3](./img/task1.1.3.png)  
  
2. Создаем статический сайт в Object Storage c собственным публичным адресом и делаем его доступным по HTTPS:  
- Для выполнения этого задания регистрирую свой домен в РЕГ.РУ и настраиваю список DNS-серверов, ссылающие на NS yandexcloud.net:  
  ![task1.2](./img/task1.2.png)  
- Создаю новый бакет и загружаю в него индексную страницу:  
  ![task1.2.1](./img/task1.2.1.png)  
- Добавляем сгенерированный сертификат:  
  ![task1.2.1.1](./img/task1.2.1.1.png)  
- Включаем HTTPS для сайта, привязав к нему созданный сертификат:  
  ![task1.2.2](./img/task1.2.2.png)
- Заходим на страницу (https://mspitsyn-web.ru) и видим, что сама страница отображается и что подключение защищено:  
  ![task1.2.3](./img/task1.2.3.png)  

---  

### Правила приёма работы

Домашняя работа оформляется в своём Git репозитории в файле README.md. Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.
Файл README.md должен содержать скриншоты вывода необходимых команд, а также скриншоты результатов.
Репозиторий должен содержать тексты манифестов или ссылки на них в файле README.md.
